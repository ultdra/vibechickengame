{"version":3,"file":"DisplayMixin.mjs","sources":["../src/DisplayMixin.ts"],"sourcesContent":["import { DisplayObject, Container } from '@pixi/display';\n\n/** @ignore */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function generateLayerContainerRenderMethod(originalRender: any)\n{\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    return function render(renderer: any): void\n    {\n        if (this._activeParentLayer && this._activeParentLayer !== renderer._activeLayer)\n        {\n            return;\n        }\n\n        if (!this.visible)\n        {\n            this.displayOrder = 0;\n\n            return;\n        }\n\n        this.displayOrder = renderer.incDisplayOrder();\n\n        // if the object is not visible or the alpha is 0 then no need to render this element\n        if (this.worldAlpha <= 0 || !this.renderable)\n        {\n            return;\n        }\n\n        renderer._activeLayer = null;\n        originalRender.call(this, renderer);\n        renderer._activeLayer = this._activeParentLayer;\n    };\n}\n\n// special case - container render method, because we want it to be faster\n/**\n * @internal\n * @private\n * @ignore\n */\nfunction containerRender(renderer: any): void\n{\n    if (this._activeParentLayer && this._activeParentLayer !== renderer._activeLayer)\n    {\n        return;\n    }\n\n    if (!this.visible)\n    {\n        this.displayOrder = 0;\n\n        return;\n    }\n\n    this.displayOrder = renderer.incDisplayOrder();\n\n    // if the object is not visible or the alpha is 0 then no need to render this element\n    if (this.worldAlpha <= 0 || !this.renderable)\n    {\n        return;\n    }\n\n    renderer._activeLayer = null;\n    this.containerRenderWebGL(renderer);\n    renderer._activeLayer = this._activeParentLayer;\n}\n\nexport function applyDisplayMixin(): void\n{\n    if (DisplayObject.prototype.displayOrder !== undefined)\n    {\n        return;\n    }\n\n    (Object as any).assign(DisplayObject.prototype, {\n        parentLayer: null,\n        _activeParentLayer: null,\n        parentGroup: null,\n        zOrder: 0,\n        zIndex: 0,\n        updateOrder: 0,\n        displayOrder: 0,\n        layerableChildren: true,\n        isLayer: false\n    });\n\n    const ContainerProto = Container.prototype as any;\n\n    ContainerProto.containerRenderWebGL = ContainerProto.render;\n    ContainerProto.render = containerRender;\n}\n\n/** Apply mixin to your custom Container class (not needed if using built-in {@link PIXI.Container})\n * Call it for `myClass.prototype`, not for `myClass` !\n * */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function applyContainerRenderMixin(CustomRenderContainer: any): void\n{\n    if (CustomRenderContainer.originalRenderWebGL)\n    {\n        return;\n    }\n\n    CustomRenderContainer.originalRenderWebGL = CustomRenderContainer.render;\n    CustomRenderContainer.render = generateLayerContainerRenderMethod(CustomRenderContainer.render);\n\n    if (CustomRenderContainer.renderCanvas)\n    {\n        CustomRenderContainer.originalRenderWebGL = CustomRenderContainer.renderCanvas;\n        CustomRenderContainer.renderCanvas = generateLayerContainerRenderMethod(CustomRenderContainer.renderCanvas);\n    }\n}\n\n/** Apply mixin for particles */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function applyParticleMixin(ParticleContainer: any): void\n{\n    ParticleContainer.prototype.layerableChildren = false;\n    applyContainerRenderMixin(ParticleContainer.prototype);\n}\n"],"names":[],"mappings":"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"}